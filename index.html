<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/JSEngine/assets/css/style.css?v=6b4ddb1a623c776285a4c080e63a4c14ce0f8457">
    <title>Welcome to GitHub Pages | JSEngine</title>
  </head>

  <body>
    <header>
      <div class="container">
        <a id="a-title" href="/JSEngine/">
          <h1>JSEngine</h1>
        </a>
      </div>
    </header>

    <div class="container">
      <section id="main_content">

        <h3>Second Life JS Engine</h3>
        <p>An JS engine for SL</p>
        
        <h3>Connection</h3>
        <p id="status" style="color: red;">Awaiting connection...</p>

        <h3>Output</h3>
        <pre class="highlight">
          <code id="output">Syntax highlighted code block</code>
        </pre>
        
        <script id="remote"></script>
        
        <script>
          var url,
              to,
              script = document.getElementById('remote');
          
          function output(text)
          {
            var panel = document.getElementById('output');
            panel.textContent = text;
          }
          
          function fetchRemote()
          {
            if (to)
            {
              clearTimeout(to);
              to = undefined;
            }
            
            script.src = url;
          }
          
          function timedFetchRemote(time = 2000)
          {
            if (to)
            {
              clearTimeout(to);
            }
            
            to = setTimeout(fetchRemote, time);
          }
          
          function onHashChange()
          {
            url = location.hash.substring(1);
            document.getElementById('status').textContent = url ? 'Connected!' : 'Awaiting connection...';
            
            if (url) fetchRemote();
          }
          
          script.addEventListener('load', function() {
            if (url) fetchRemote();
          });
          
          script.addEventListener('error', function() {
            if (url) timedFetchRemote(2000);
          });
          
          window.addEventListener("hashchange", onHashChange, false);
          onHashChange();
        </script>
        
      </section>
    </div>
  </body>
</html>
